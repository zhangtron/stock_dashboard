{% extends "base.html" %}

{% block content %}
<!-- 移动端顶部导航 -->
<header class="mobile-header">
    <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <div class="header-title">
        <img src="/static/favicon/favicon.svg" class="brand-logo" alt="先信投资 Logo">
        <h1>先信投资</h1>
    </div>
    <div class="header-actions">
        <button id="theme-toggle-mobile" class="theme-toggle-mobile">
            <i class="bi bi-palette"></i>
        </button>
    </div>
</header>

<!-- 桌面端顶部导航 -->
<header class="desktop-header glass">
    <button id="sidebar-toggle-desktop" class="sidebar-toggle-desktop">
        <i class="bi bi-list"></i>
    </button>
    <div class="header-title">
        <img src="/static/favicon/favicon.svg" class="brand-logo" alt="先信投资 Logo">
        <h1>基本面选股数据看板</h1>
    </div>
    <div class="header-search">
        <div class="search-box">
            <i class="bi bi-search search-icon"></i>
            <input 
                type="text" 
                id="headerSearch" 
                placeholder="搜索股票代码或名称"
                autocomplete="off"
            >
            <button class="search-clear" id="searchClear" style="display: none;">
                <i class="bi bi-x"></i>
            </button>
        </div>
        <div class="search-suggestions" id="searchSuggestions" style="display: none;">
        </div>
    </div>
    <div class="header-actions">
        <div class="theme-toggle-container">
            <button id="theme-toggle-desktop" class="theme-toggle-desktop">
                <i class="bi bi-palette"></i>
            </button>
        </div>
    </div>
</header>

<!-- Top 3 推荐股票 -->
<section class="top-3">
    <h2 class="section-title">
        <i class="bi bi-star-fill section-icon"></i>
        Top 3 推荐股票
    </h2>
    <div class="cards-container">
        <div class="card card-1">
            <div class="card-rank">
                <span class="rank-icon">🥇</span>
                <span>第1名</span>
            </div>
            <div id="top3-0" class="card-content text-center">
                <p class="mb-1 text-muted">加载中...</p>
            </div>
        </div>
            <div class="card card-2">
                <div class="card-rank">
                    <span class="rank-icon">🥈</span>
                    <span>第2名</span>
                </div>
            <div id="top3-1" class="card-content text-center">
                <p class="mb-1 text-muted">加载中...</p>
            </div>
        </div>
        <div class="card card-3">
            <div class="card-rank">
                <span class="rank-icon">🥉</span>
                <span>第3名</span>
            </div>
            <div id="top3-2" class="card-content text-center">
                <p class="mb-1 text-muted">加载中...</p>
            </div>
        </div>
    </div>
</section>

<!-- 筛选条件 -->
<section class="filter-section">
    <h2 class="section-title">
        <i class="bi bi-funnel section-icon"></i>
        筛选条件
    </h2>
    <div class="filter-container glass">
        <div class="filter-row">
            <div class="filter-item">
                <label for="stockCode">股票代码</label>
                <input type="text" id="stockCode" placeholder="输入股票代码">
            </div>
            <div class="filter-item">
                <label for="stockName">股票名称</label>
                <input type="text" id="stockName" placeholder="输入股票名称">
            </div>
            <div class="filter-item">
                <label for="minScore">最小得分</label>
                <input type="number" id="minScore" min="0" max="100" placeholder="0">
            </div>
            <div class="filter-item">
                <label for="maxScore">最大得分</label>
                <input type="number" id="maxScore" min="0" max="100" placeholder="100">
            </div>
            <div class="filter-item">
                <label for="recommendation">投资建议</label>
                <select id="recommendation">
                    <option value="">全部</option>
                    <option value="STRONG_BUY">强烈推荐</option>
                    <option value="BUY">买入</option>
                    <option value="HOLD">持有</option>
                    <option value="AVOID">回避</option>
                </select>
            </div>
        </div>
        <div class="filter-actions">
            <button class="btn btn-secondary">
                <i class="bi bi-arrow-counterclockwise"></i>
                重置
            </button>
            <button class="btn btn-primary">
                <i class="bi bi-funnel-fill"></i>
                应用筛选
            </button>
        </div>
    </div>
</section>

<!-- 全部股票列表 -->
<section class="stock-list">
    <h2 class="section-title">
        <i class="bi bi-table section-icon"></i>
        全部股票列表
        <span class="badge" id="totalCount">0</span>
    </h2>
    <div class="table-container glass">
        <table class="stock-table">
                <thead>
                    <tr>
                        <th class="sort-icon" data-sort="stock_code">
                            股票代码 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                        <th class="sort-icon" data-sort="stock_name">
                            股票名称 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                        <th class="sort-icon" data-sort="overall_score">
                            综合得分 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                        <th class="sort-icon" data-sort="growth_score">
                            成长能力 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                        <th class="sort-icon" data-sort="profitability_score">
                            盈利能力 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                        <th class="sort-icon" data-sort="solvency_score">
                            偿债能力 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                        <th class="sort-icon" data-sort="cashflow_score">
                            现金流 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                        <th>投资建议</th>
                        <th class="sort-icon" data-sort="calc_time">
                            计算时间 <i class="bi bi-arrow-down-up" style="opacity: 0.5;"></i>
                        </th>
                    </tr>
                </thead>
            <tbody id="tableBody">
                <tr>
                    <td colspan="9" class="text-center">
                        <i class="bi bi-hourglass-split"></i>
                        加载中...
                    </td>
                </tr>
            </tbody>
        </table>
        
        <!-- 分页 -->
        <nav aria-label="Page navigation" class="pagination-container">
            <ul class="pagination" id="pagination"></ul>
        </nav>
    </div>
</section>
{% endblock %}
